#!/bin/bash

# –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 17: SGD vs GD —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –≥–µ—Å—Å–∏–∞–Ω–æ–≤
# –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ 16 —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏

echo "üî¨ –ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ 17: –û–±—É—á–µ–Ω–∏–µ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –≥–µ—Å—Å–∏–∞–Ω–æ–≤"
echo "üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:"
echo "   - Learning rates: 0.1, 0.01"
echo "   - Batch size: 64"
echo "   - Sample size: 1000 (—É–≤–µ–ª–∏—á–µ–Ω–æ —Å 386)"
echo "   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫"
echo ""

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–∫—Ä–∏–ø—Ç–æ–≤
cd "$(dirname "$0")"

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å
if [ -f "../.venv/bin/activate" ]; then
    echo "üîß –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ..."
    source ../.venv/bin/activate
fi

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
mkdir -p ../data/checkpoints/exp17

# –ó–∞–ø—É—Å–∫–∞–µ–º runner
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã..."
python exp17_runner.py

echo ""
echo "‚úÖ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 17 –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: ../data/checkpoints/exp17/"
echo ""
echo "üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:"
echo "   - plateau_model_lr0.1.pth, plateau_model_lr0.01.pth"
echo "   - params_tensor_lr*.pkl, hessians_tensor_lr*.pkl"
echo "   - metadata_lr*.pkl, plateau_metadata_lr*.npy"
echo "   - –ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è"